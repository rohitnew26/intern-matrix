const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CourseDetails-ByWGp7lZ.js","assets/index-iAiIFp0J.js","assets/router-Z28cWG60.js","assets/react-Bq7xPAhO.js","assets/ui-BpKHBLDN.js","assets/index-C5JRY1vk.css","assets/LazyImage-Dn-MiPcq.js","assets/phonepeService-06ZOpbw5.js"])))=>i.map(i=>d[i]);
import{j as e,e as V,c as G,f as U,_ as q}from"./index-iAiIFp0J.js";import{r as l,L as _}from"./router-Z28cWG60.js";import{L as H}from"./LazyImage-Dn-MiPcq.js";import{F as J}from"./ui-BpKHBLDN.js";import"./react-Bq7xPAhO.js";let F=!1;const m=()=>{F||(F=!0,q(()=>import("./CourseDetails-ByWGp7lZ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])))},ee=()=>{const[n,u]=l.useState(""),[i,f]=l.useState(""),[d,g]=l.useState(""),[h,p]=l.useState(""),[x,v]=l.useState(5e3),[b,j]=l.useState(!1),[N,D]=l.useState(""),[y,w]=l.useState([]),[E,C]=l.useState(!0),[A,B]=l.useState(null);l.useEffect(()=>{let s=!1;return(async()=>{try{C(!0);const t=await U(),a=(t||[]).filter(c=>((c.course_type||c.type||"")+"").trim().toLowerCase().includes("online"));if(console.log("üì¶ Fetched online courses:",a.length),a.length>0&&console.log("üí∞ Sample course pricing:",{title:a[0].title,price_cents:a[0].price_cents,price:a[0].price,offerPrice:a[0].offerPrice,originalPrice:a[0].originalPrice}),!s){const c=a.length>0?a:t;w(c)}}catch(t){s||(console.error("Failed to fetch courses from backend",t),B(t.message||"Failed to load courses"),w([]))}finally{s||C(!1)}})(),()=>{s=!0}},[]);const o=y,M=l.useMemo(()=>{const s=new Map;o.forEach(t=>{const a=(t.branch||"").trim();if(a){const c=a.toLowerCase();s.has(c)||s.set(c,a)}});const r=Array.from(s.values()).sort((t,a)=>t.localeCompare(a));return r.length>0&&console.log("üè¢ Available branches:",r),r},[o]),$=["Beginner","Intermediate","Advanced"],z=["2","3","4","5","8","12"],R=l.useMemo(()=>[...new Set(o.map(s=>s.category||""))].filter(Boolean),[o]),S=l.useMemo(()=>{const s=N.toLowerCase(),r=o.filter(t=>{const a=(t.name||t.title||"").toLowerCase(),c=(t.branch||"").toLowerCase(),L=(t.category||"").toLowerCase(),I=parseInt(t.price,10)||Math.round((t.price_cents||0)/100)||0,T=(t.duration||"").trim().toLowerCase().match(/\d+/)?.[0]||"",O=s===""||a.includes(s)||c.includes(s)||L.includes(s),P=(t.branch||"").trim(),k=!n||P.toLowerCase()===n.toLowerCase();return n&&!k&&console.debug(`‚ùå Course "${t.title}" - branch mismatch. Expected: "${n}", Got: "${P}"`),O&&k&&(!i||t.level===i)&&(!d||t.category===d)&&(!h||T===h)&&I<=x});return n&&console.log(`üîç Branch filter "${n}" - Found ${r.length} matching courses`),r},[o,N,n,i,d,h,x]);return e.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col lg:flex-row gap-6 p-4 relative",children:[e.jsxs("button",{onClick:()=>j(!0),className:`lg:hidden fixed bottom-6 right-6 z-40 bg-black text-white flex items-center gap-2 px-4 py-2 rounded-full shadow-lg ${b?"hidden":"flex"}`,children:[e.jsx(J,{size:18})," Filter"]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-30 lg:hidden",onClick:()=>j(!1)}),e.jsxs("aside",{className:`bg-white rounded-xl p-5 shadow-md space-y-6 w-72 lg:w-64 flex-shrink-0
        lg:sticky lg:top-24 transition-transform duration-300
        ${b?"translate-x-0":"-translate-x-full"}
        lg:translate-x-0 fixed top-0 left-0 h-full lg:h-auto z-40 overflow-y-auto`,children:[e.jsxs("div",{className:"flex items-center justify-between lg:hidden",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-700 text-xl",children:"‚úï"})]}),e.jsx("button",{onClick:()=>{u(""),f(""),g(""),p(""),v(5e3)},className:"w-full border py-2 rounded-lg font-semibold hover:bg-gray-100",children:"Clear Filters"}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-lg mb-2",children:"category"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:d==="",onChange:()=>g("")}),e.jsx("span",{children:"All"})]}),R.map(s=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:d===s,onChange:()=>g(s)}),e.jsx("span",{children:s})]},s))]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Duration"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:h==="",onChange:()=>p("")}),e.jsx("span",{children:"All"})]}),z.map(s=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:h===s,onChange:()=>p(s)}),e.jsxs("span",{children:[s," week",s!=="1"?"s":""]})]},s))]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Branch"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n==="",onChange:()=>u("")}),e.jsx("span",{children:"All"})]}),M.map(s=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n===s,onChange:()=>u(s.trim())}),e.jsx("span",{children:s})]},s))]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Difficulty"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i==="",onChange:()=>f("")}),e.jsx("span",{children:"All"})]}),$.map(s=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i===s,onChange:()=>f(s)}),e.jsx("span",{children:s})]},s))]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Price Range"}),e.jsx("input",{type:"range",min:"0",max:"5000",value:x,onChange:s=>v(parseInt(s.target.value)),className:"w-full"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["‚Çπ 0 ‚Äì ",x]})]})]}),e.jsxs("section",{className:"flex-1",children:[e.jsx("div",{className:"w-full flex justify-center mb-5",children:e.jsx("input",{type:"text",placeholder:"Search online courses...",className:"border w-full sm:w-96 px-4 py-2 rounded-full shadow-sm",value:N,onChange:s=>D(s.target.value)})}),A&&!y.length&&e.jsx("p",{className:"text-center text-red-500 text-sm mb-4",children:"Loading courses..."}),e.jsxs("main",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:[E&&!y.length&&[...Array(6)].map((s,r)=>e.jsx("div",{className:"h-72 bg-gray-200 rounded-2xl animate-pulse"},r)),S.map((s,r)=>{const t=V(s);return e.jsxs("div",{className:"bg-white rounded-xl shadow-md hover:shadow-xl transition transform hover:-translate-y-1 overflow-hidden",children:[e.jsx(_,{to:t,state:{course:s,finalOfferPrice:s.offerPrice||s.price},onMouseEnter:m,onFocus:m,children:e.jsx("div",{className:"relative",children:e.jsx(H,{asBackground:!0,src:s.cover_image||s.thumbnail||"/placeholder-course.jpg",className:"h-44 sm:h-48 w-full bg-center bg-cover rounded-t-xl",children:e.jsx("span",{className:"absolute top-3 left-3 inline-block bg-white text-black text-sm px-3 py-2 rounded-full font-bold shadow-md",children:s.duration||s.tags?.[0]||"2 weeks"})})})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:s.name||s.title}),e.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[e.jsx(G,{className:"text-yellow-400",size:16}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:s.rating||"4.8"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:s.subtitle||"Build job-ready experience via real projects and professional mentors."}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("p",{className:"text-gray-500 line-through text-xl",children:["‚Çπ",s.price]}),e.jsxs("p",{className:"text-green-600 font-bold text-lg",children:["‚Çπ",s.offerPrice||s.price]})]}),e.jsx(_,{to:t,state:{course:s,finalOfferPrice:s.offerPrice||s.price},onMouseEnter:m,onFocus:m,className:"bg-blue-600 text-white px-5 py-2 rounded-full font-semibold hover:bg-blue-700 transition shadow-md",children:"Enroll Now"})]})]})]},r)}),S.length===0&&e.jsx("p",{className:"col-span-full text-center text-gray-600",children:"No Results Found"})]})]})]})};export{ee as default};
