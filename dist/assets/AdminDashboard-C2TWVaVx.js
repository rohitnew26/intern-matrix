import{j as e}from"./index-OIN1c1r4.js";import{r}from"./router-Z28cWG60.js";import{g as h,a as g,b as u}from"./adminService-DgvQFOXP.js";import{K as y,N as j,U as f,y as N,O as b,Q as v}from"./ui-DI8vkpLQ.js";import"./react-Bq7xPAhO.js";function _(){const[t,i]=r.useState(null),[w,c]=r.useState([]),[n,d]=r.useState([]),[o,x]=r.useState(!0);r.useEffect(()=>{m()},[]);async function m(){try{const[s,a,l]=await Promise.all([h(),g(6),u()]);i(s),c(a),d(l)}catch(s){console.error("Error loading dashboard:",s)}finally{x(!1)}}if(o)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});const p=[{name:"Total Revenue",value:`₹${t?.totalRevenue?.toLocaleString("en-IN")||0}`,icon:y,change:"+12.5%",changeType:"positive",bgColor:"bg-green-500"},{name:"Total Orders",value:t?.totalOrders||0,icon:j,change:"+8.2%",changeType:"positive",bgColor:"bg-blue-500"},{name:"Total Enrollments",value:t?.totalEnrollments||0,icon:f,change:"+15.3%",changeType:"positive",bgColor:"bg-purple-500"},{name:"Total Courses",value:t?.totalCourses||0,icon:N,change:"+5.0%",changeType:"positive",bgColor:"bg-orange-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Welcome to your admin dashboard"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:p.map(s=>{const a=s.icon;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s.name}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:s.value})]}),e.jsx("div",{className:`p-3 rounded-lg ${s.bgColor}`,children:e.jsx(a,{className:"w-6 h-6 text-white"})})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[s.changeType==="positive"?e.jsx(b,{className:"w-4 h-4 text-green-500"}):e.jsx(v,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:`ml-2 text-sm font-medium ${s.changeType==="positive"?"text-green-600":"text-red-600"}`,children:s.change}),e.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"from last month"})]})]},s.name)})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[e.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Orders"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t?.recentOrders?.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[s.order_id?.substring(0,8),"..."]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.profiles?.full_name||s.profiles?.email||"Unknown"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:s.course_title}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",(s.price_cents/100).toLocaleString("en-IN")]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.payment_status==="success"?"bg-green-100 text-green-800":s.payment_status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString("en-IN")})]},s.id))})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[e.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Top Enrolled Courses"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:n.map((s,a)=>e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.course}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[s.count," students"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s.count/Math.max(...n.map(l=>l.count))*100}%`}})})]})},a))})})]})]})}export{_ as default};
