import{j as e,e as C,d as _}from"./index-DaEBHKGl.js";import{r as i,a as S}from"./router-Z28cWG60.js";import{L as I}from"./LazyImage-CF0WbHTi.js";import{y as L,B as w,m as P,U as E}from"./ui-BpKHBLDN.js";const q=({title:c,branchFilter:n,data:x=[],loading:u=!1,error:f=null})=>{const[o,p]=i.useState("all"),[r,j]=i.useState(""),a=i.useMemo(()=>x.filter(s=>{const t=n.length===0||n.some(N=>s.branches.some(v=>{const y=(v||"").toLowerCase(),b=(N||"").toLowerCase();return y.includes(b)||b.includes(y)})),l=o==="all"||s.duration===o,h=r===""||s.title.toLowerCase().includes(r.toLowerCase())||s.description.toLowerCase().includes(r.toLowerCase());return t&&l&&h}),[x,n,o,r]),g=[...new Set(x.map(s=>s.duration))].sort(),d=S(),m=s=>{try{const t=C(s),l=s?.offerPrice??s?.offerprice??s?.price??s?.originalPrice??null;d(t,{state:{course:s,finalOfferPrice:l}})}catch{s?.slug?d(`/${s.slug}`):s?.id&&d(`/course/${s.id}`)}};return e.jsx("div",{className:"min-h-screen bg-white py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-gray-900 mb-4",children:c}),e.jsxs("p",{className:"text-gray-600 text-lg max-w-2xl",children:["Explore internship opportunities tailored for ",c.split(" ")[0]," ","students. Gain real-world experience and build your professional network."]})]}),u?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx(L,{className:"w-12 h-12 text-yellow-500 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading internships..."})]})}):f?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx(w,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-500",children:"Something went wrong. Please try again."})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-end gap-3 flex-nowrap w-full overflow-x-auto",children:[e.jsxs("div",{className:"flex-1 min-w-[140px]",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold mb-1 text-gray-700",children:"Search Internships"}),e.jsx("input",{type:"text",placeholder:"Search by title or keyword...",value:r,onChange:s=>j(s.target.value),className:"w-full bg-white border border-gray-300 rounded-lg px-2 py-2 sm:px-3 sm:py-3 text-gray-900 placeholder-gray-400 focus:outline-none focus:border-yellow-500 shadow-sm transition"})]}),g.length>0&&e.jsxs("div",{className:"flex-1 min-w-[120px] max-w-[180px]",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold mb-1 text-gray-700",children:"Duration"}),e.jsxs("select",{value:o,onChange:s=>p(s.target.value),className:"w-full bg-white border border-gray-300 rounded-lg px-2 py-2 sm:px-3 sm:py-3 text-gray-900 focus:outline-none focus:border-yellow-500 shadow-sm transition",children:[e.jsx("option",{value:"all",children:"All Durations"}),g.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-gray-600",children:["Showing"," ",e.jsx("span",{className:"text-yellow-600 font-semibold",children:a.length})," ","internship",a.length!==1?"s":""]})}),a.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:a.map(s=>e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden border border-gray-200 hover:shadow-xl transition-all duration-300 group",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx(I,{src:s.thumbnail,alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),e.jsxs("div",{className:"absolute top-3 right-3 flex flex-wrap gap-2",children:[s.branches.slice(0,2).map(t=>e.jsx("span",{className:"bg-yellow-500 text-white text-xs font-semibold px-3 py-1 rounded-full shadow",children:t},t)),s.branches.length>2&&e.jsxs("span",{className:"bg-yellow-600 text-white text-xs font-semibold px-3 py-1 rounded-full",children:["+",s.branches.length-2]})]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 group-hover:text-yellow-600 transition-colors",children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 leading-relaxed",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{children:s.duration})]}),s.enrolledCount>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-yellow-600"}),e.jsxs("span",{children:[s.enrolledCount," Enrolled"]})]})]}),s.rating&&s.rating>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:Array.from({length:5}).map((t,l)=>e.jsx("span",{className:l<Math.round(s.rating)?"text-yellow-500":"text-gray-300",children:"★"},l))}),e.jsx("span",{className:"text-sm text-gray-700",children:s.rating.toFixed(1)})]})]}),e.jsxs("div",{className:"flex justify-between items-center border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"flex items-baseline gap-2",children:s.offerPrice?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs sm:text-sm md:text-lg text-gray-500 line-through",children:["₹",s.originalPrice]}),e.jsxs("p",{className:"text-sm sm:text-lg md:text-2xl font-bold text-yellow-600",children:["₹",s.offerPrice]})]}):e.jsxs("p",{className:"text-sm sm:text-lg md:text-2xl font-bold text-yellow-600",children:["₹",s.price]})}),s.certificateAwarded&&e.jsxs("div",{className:"flex items-center gap-1 text-xs sm:text-sm md:text-base whitespace-nowrap",children:[e.jsx(w,{className:"w-3 h-3 sm:w-4 sm:h-4 text-yellow-400"}),e.jsx("span",{children:"Certificate Awarded"})]})]}),e.jsx("button",{type:"button",onClick:()=>m(s),className:"w-full bg-yellow-500 hover:bg-yellow-600 text-black font-semibold py-2.5 rounded-xl shadow-md hover:shadow-lg hover:scale-[1.02] transition-all duration-300",children:"Enroll Now"})]})]},s.id))}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx(w,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"No internships found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your filters or search terms."})]})]})]})})},U=(c="Industrial Training",n=[])=>{const[x,u]=i.useState([]),[f,o]=i.useState(!0),[p,r]=i.useState(null);return i.useEffect(()=>{(async()=>{try{o(!0);let a=_.from("courses").select("*").eq("status","published");c==="Industrial Training"?a=a.eq("type","industrial_training"):c==="Online Course"&&(a=a.eq("type","online"));const{data:g,error:d}=await a.order("created_at",{ascending:!1});if(d)throw d;let m=g||[];n.length>0&&(m=m.filter(t=>{if(!t.branch)return!1;const l=t.branch.split(",").map(h=>h.trim().toUpperCase());return n.some(h=>l.includes(h.toUpperCase()))}));const s=m.map(t=>({id:t.id,title:t.title,slug:t.slug,description:t.subtitle||t.overview||t.description||"",thumbnail:t.thumbnail_url,branches:t.branch?t.branch.split(",").map(l=>l.trim()):[],duration:t.total_duration_hours?`${t.total_duration_hours} hours`:"Not specified",price:Math.round(t.price_cents/100)||0,offerPrice:Math.round(t.price_cents/100)||0,originalPrice:Math.round(t.mrp_cents/100)||Math.round(t.price_cents/100)||0,enrolledCount:t.current_enrollments||0,certificateAwarded:t.certificate_available||!0,level:t.level||"beginner",instructor:t.instructor_name||"Instructor",category:t.category||"General",rating:t.average_rating||4.5,couponCode:"",couponDiscount:t.discount_percentage||0}));u(s),r(null)}catch(a){console.error("Failed to fetch internships from Supabase",a),r(a.message),u([])}finally{o(!1)}})()},[c,n.length]),{internships:x,loading:f,error:p}};export{q as I,U as u};
