const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CourseDetails-CFr5q0Cg.js","assets/index-OnP03quI.js","assets/router-Z28cWG60.js","assets/react-Bq7xPAhO.js","assets/ui-DI8vkpLQ.js","assets/index-DRUrTofu.css","assets/LazyImage-DhbwXzXh.js","assets/phonepeService-06ZOpbw5.js"])))=>i.map(i=>d[i]);
import{j as e,m as N,i as O,e as U,k as q,c as J,_ as K}from"./index-OnP03quI.js";import{r as l,L as v}from"./router-Z28cWG60.js";import{L as Q}from"./LazyImage-DhbwXzXh.js";import{F as W,m as X,y as Y}from"./ui-DI8vkpLQ.js";import"./react-Bq7xPAhO.js";let A=!1;const E=()=>{A||(A=!0,K(()=>import("./CourseDetails-CFr5q0Cg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])))},Z=({skill:a,idx:x,detailPath:c,finalOfferPrice:d})=>{const o=l.useRef(null),g=q(o,{once:!0,margin:"-50px"}),i={onMouseEnter:E,onFocus:E};return e.jsxs(N.div,{ref:o,initial:{opacity:0,y:40},animate:g?{opacity:1,y:0}:{},transition:{duration:.5,delay:x*.08},whileHover:{y:-6},className:"group bg-white rounded-2xl shadow-md hover:shadow-xl transition-all duration-500 overflow-hidden",children:[e.jsx(v,{to:c,...i,children:e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx(Q,{asBackground:!0,src:a.cover_image||a.thumbnail||"/placeholder-course.jpg",className:"h-44 sm:h-48 w-full bg-center bg-cover transform group-hover:scale-105 transition-transform duration-700"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("span",{className:"absolute top-3 left-3 inline-flex items-center gap-1 bg-white/95 backdrop-blur-sm text-gray-800 text-xs px-3 py-1.5 rounded-full font-semibold shadow-md",children:[e.jsx(X,{className:"w-3 h-3"}),a.duration||a.tags?.[0]||"2 weeks"]}),a.level&&e.jsx("span",{className:"absolute top-3 right-3 bg-indigo-600 text-white text-xs px-3 py-1.5 rounded-full font-semibold shadow-md",children:a.level})]})}),e.jsxs("div",{className:"p-5",children:[e.jsx(v,{to:c,...i,children:e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-indigo-600 transition-colors",children:a.name||a.title})}),e.jsx("p",{className:"text-gray-500 text-sm mb-4 line-clamp-2",children:a.subtitle||"Build job-ready experience via real projects and professional mentors."}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((u,h)=>e.jsx(J,{className:`w-3 h-3 ${h<Math.floor(a.rating||4.8)?"text-yellow-400":"text-gray-200"}`},h))}),e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:a.rating||"4.8"})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[a.price&&e.jsxs("span",{className:"text-gray-400 line-through text-sm",children:["‚Çπ",a.price]}),e.jsx("span",{className:"text-green-600 font-bold text-lg",children:d?`‚Çπ${d}`:""})]}),e.jsx(N.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(v,{to:c,state:{finalOfferPrice:d,courseData:a},...i,className:"inline-flex items-center gap-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-5 py-2.5 rounded-full font-semibold hover:shadow-lg hover:shadow-blue-500/30 transition-all",children:["Enroll",e.jsx(Y,{className:"w-4 h-4"})]})})]})]})]})},ne=()=>{const[a,x]=l.useState(""),[c,d]=l.useState(""),[o,g]=l.useState(""),[i,u]=l.useState(""),[h,w]=l.useState(5e3),[p,f]=l.useState(!1),[b,P]=l.useState(""),[j,C]=l.useState([]),[B,S]=l.useState(!0),[$,M]=l.useState(null);l.useEffect(()=>{let s=!1;return(async()=>{try{S(!0);const n=(await U()||[]).filter(y=>(y.course_type||"").toLowerCase().includes("online"));console.log("üì¶ Fetched online courses:",n.length),n.length>0&&console.log("üí∞ Sample course pricing:",{title:n[0].title,price_cents:n[0].price_cents,price:n[0].price,offerPrice:n[0].offerPrice,originalPrice:n[0].originalPrice}),s||C(n)}catch(t){s||(console.error("Failed to fetch courses from backend",t),M(t.message||"Failed to load courses"),C([]))}finally{s||S(!1)}})(),()=>{s=!0}},[]);const m=j,I=l.useMemo(()=>{const s=new Set;m.forEach(t=>{t.branch&&t.branch.trim()&&s.add(t.branch.trim())});const r=Array.from(s).sort();return r.length>0&&console.log("üè¢ Available branches:",r),r},[m]),R=["Beginner","Intermediate","Advanced"],z=["2","3","4","5","8","12"],T=l.useMemo(()=>[...new Set(m.map(s=>s.category||s.tags?.[0]||""))].filter(Boolean),[m]),k=l.useMemo(()=>{const s=b.toLowerCase(),r=m.filter(t=>{const n=(t.name||t.title||"").toLowerCase(),y=(t.branch||"").toLowerCase(),V=(t.category||t.tags?.[0]||"").toLowerCase(),L=t.price!==null&&t.price!==void 0&&t.price!==""?Number(t.price):t.price_cents?Math.round((t.price_cents||0)/100):void 0,H=(t.duration||"").toLowerCase().trim().match(/\d+/)?.[0]||"",G=s===""||n.includes(s)||y.includes(s)||V.includes(s),D=(t.branch||"").trim(),F=!a||D===a;return a&&!F&&console.debug(`‚ùå Course "${t.title}" - branch mismatch. Expected: "${a}", Got: "${D}"`),G&&F&&(!c||t.level===c)&&(!o||(t.category||t.tags?.[0])===o)&&(!i||H===i)&&(L===void 0||L<=h)});return a&&console.log(`üîç Branch filter "${a}" - Found ${r.length} matching courses`),r},[m,b,a,c,o,i,h]),_=l.useMemo(()=>k.slice().reverse(),[k]);return e.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col lg:flex-row gap-6 p-4 relative",children:[e.jsxs("button",{onClick:()=>f(!0),className:`lg:hidden fixed bottom-6 right-6 z-40 bg-black text-white flex items-center gap-2 px-4 py-2 rounded-full shadow-lg ${p?"hidden":"flex"}`,children:[e.jsx(W,{size:18})," Filter"]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-30 lg:hidden",onClick:()=>f(!1)}),e.jsxs("aside",{className:`bg-white rounded-xl p-5 shadow-md space-y-6 w-72 lg:w-64 shrink-0
        lg:sticky lg:top-24 transition-transform duration-300
        ${p?"translate-x-0":"-translate-x-full"}
        lg:translate-x-0 lg:relative fixed top-0 left-0 h-full lg:h-auto z-40 lg:z-auto overflow-y-auto`,children:[e.jsxs("div",{className:"flex items-center justify-between lg:hidden",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-700 text-xl",children:"‚úï"})]}),e.jsx("button",{onClick:()=>{x(""),d(""),g(""),u(""),w(5e3)},className:"w-full border py-2 rounded-lg font-semibold hover:bg-gray-100",children:"Clear Filters"}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Category"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:o==="",onChange:()=>g("")}),e.jsx("span",{children:"All"})]}),T.map(s=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:o===s,onChange:()=>g(s)}),e.jsx("span",{children:s})]},s))]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Duration"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i==="",onChange:()=>u("")}),e.jsx("span",{children:"All"})]}),z.map(s=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i===s,onChange:()=>u(s)}),e.jsxs("span",{children:[s," weeks"]})]},s))]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Branch"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a==="",onChange:()=>x("")}),e.jsx("span",{children:"All"})]}),I.map(s=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a===s,onChange:()=>x(s)}),e.jsx("span",{children:s})]},s))]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Difficulty"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c==="",onChange:()=>d("")}),e.jsx("span",{children:"All"})]}),R.map(s=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c===s,onChange:()=>d(s)}),e.jsx("span",{children:s})]},s))]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Price Range"}),e.jsx("input",{type:"range",min:"0",max:"5000",value:h,onChange:s=>w(parseInt(s.target.value)),className:"w-full"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["‚Çπ 0 ‚Äì ",h]})]})]}),e.jsxs("section",{className:"flex-1",children:[e.jsx("div",{className:"w-full flex justify-center mb-5",children:e.jsx("input",{type:"text",placeholder:"Search Online Internships...",className:"border w-full sm:w-96 px-4 py-2 rounded-full shadow-sm",value:b,onChange:s=>P(s.target.value)})}),$&&!j.length&&e.jsx("p",{className:"text-center text-red-500 text-sm mb-4",children:"Network error. Please try again later."}),e.jsxs("main",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[B&&!j.length&&[...Array(8)].map((s,r)=>e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:r*.1},className:"bg-white rounded-2xl shadow-md overflow-hidden",children:[e.jsx("div",{className:"h-48 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 animate-pulse"}),e.jsxs("div",{className:"p-5 space-y-3",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded-full w-3/4 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded-full w-full animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded-full w-2/3 animate-pulse"}),e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded-full w-20 animate-pulse"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded-full w-24 animate-pulse"})]})]})]},r)),_.map((s,r)=>{const t=O(s),n=s.offerPrice??s.price??"";return e.jsx(Z,{skill:s,idx:r,detailPath:t,finalOfferPrice:n},r)}),_.length===0&&e.jsx("p",{className:"col-span-full text-center text-gray-600",children:"No Results Found"})]})]})]})};export{ne as default};
