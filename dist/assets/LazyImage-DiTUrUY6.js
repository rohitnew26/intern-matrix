import{j as e}from"./index-BMFNytL1.js";import{r as t}from"./router-Z28cWG60.js";function $({src:o,alt:c="",className:f="",imgClassName:E="",placeholder:u,placeholderNode:i,asBackground:I=!1,rootMargin:g="200px",style:k,children:p,width:v,height:x,fallbackSrc:y=null}){const a=t.useRef(null),[l,m]=t.useState(!1),[d,n]=t.useState(!1),[b,j]=t.useState(!1);t.useEffect(()=>{const s=a.current;if(!s)return;if(typeof IntersectionObserver>"u"){m(!0);return}const r=new IntersectionObserver(L=>{L.forEach(z=>{z.isIntersecting&&(m(!0),r.disconnect())})},{rootMargin:g});return r.observe(s),()=>r.disconnect()},[g]);const h={width:v?`${v}px`:void 0,height:x?`${x}px`:void 0,...k},w=(()=>{const s="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 600 400'><rect fill='%23f3f4f6' width='600' height='400' /><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='%239ca3af' font-family='Arial, Helvetica, sans-serif' font-size='28'>No image available</text></svg>";try{return`data:image/svg+xml;utf8,${encodeURIComponent(s)}`}catch{return"/placeholder-course.jpg"}})();return I?e.jsxs("div",{ref:a,className:f,style:{position:"relative",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundImage:l?`url(${b?y||w:o})`:void 0,...h},children:[!d&&e.jsx("div",{"aria-hidden":!0,style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:i||e.jsx("div",{style:{position:"absolute",inset:0,background:u||"linear-gradient(90deg,#f0f0f0 0%,#e8e8e8 50%,#f0f0f0 100%)",filter:"blur(6px)"}})}),l&&e.jsx("img",{src:o,alt:c,style:{display:"none"},onLoad:()=>n(!0),onError:()=>{j(!0),n(!0)},decoding:"async"}),e.jsx("div",{style:{position:"relative"},children:p})]}):e.jsxs("div",{ref:a,className:f,style:h,children:[!d&&e.jsx("div",{"aria-hidden":!0,style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:i||e.jsx("div",{style:{position:"absolute",inset:0,background:u||"linear-gradient(90deg,#f0f0f0 0%,#e8e8e8 50%,#f0f0f0 100%)"}})}),l&&e.jsx("img",{src:b?y||w:o,alt:c,className:E,style:{width:"100%",height:"100%",objectFit:"cover",opacity:d?1:0,transition:"opacity 300ms ease",display:"block"},onLoad:()=>n(!0),onError:()=>{j(!0),n(!0)},decoding:"async",loading:"lazy"}),p]})}export{$ as L};
