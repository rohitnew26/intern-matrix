import{j as e}from"./index-OnP03quI.js";import{r as t}from"./router-Z28cWG60.js";function $({src:n,alt:u="",className:c="",imgClassName:I="",placeholder:l,placeholderNode:s,asBackground:h=!1,rootMargin:f="200px",style:k,children:p,width:y,height:g,fallbackSrc:x="/placeholder-course.jpg"}){const r=t.useRef(null),[o,b]=t.useState(!1),[a,i]=t.useState(!1),[v,j]=t.useState(!1);t.useEffect(()=>{const E=r.current;if(!E)return;if(typeof IntersectionObserver>"u"){b(!0);return}const d=new IntersectionObserver(L=>{L.forEach(S=>{S.isIntersecting&&(b(!0),d.disconnect())})},{rootMargin:f});return d.observe(E),()=>d.disconnect()},[f]);const m={width:y?`${y}px`:void 0,height:g?`${g}px`:void 0,...k};return h?e.jsxs("div",{ref:r,className:c,style:{position:"relative",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundImage:o?`url(${v?x:n})`:void 0,...m},children:[!a&&e.jsx("div",{"aria-hidden":!0,style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:s||e.jsx("div",{style:{position:"absolute",inset:0,background:l||"linear-gradient(90deg,#f0f0f0 0%,#e8e8e8 50%,#f0f0f0 100%)",filter:"blur(6px)"}})}),o&&e.jsx("img",{src:n,alt:u,style:{display:"none"},onLoad:()=>i(!0),onError:()=>{j(!0),i(!0)},decoding:"async"}),e.jsx("div",{style:{position:"relative"},children:p})]}):e.jsxs("div",{ref:r,className:c,style:m,children:[!a&&e.jsx("div",{"aria-hidden":!0,style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:s||e.jsx("div",{style:{position:"absolute",inset:0,background:l||"linear-gradient(90deg,#f0f0f0 0%,#e8e8e8 50%,#f0f0f0 100%)"}})}),o&&e.jsx("img",{src:v?x:n,alt:u,className:I,style:{width:"100%",height:"100%",objectFit:"cover",opacity:a?1:0,transition:"opacity 300ms ease",display:"block"},onLoad:()=>i(!0),onError:()=>{j(!0),i(!0)},decoding:"async",loading:"lazy"}),p]})}export{$ as L};
