const i="https://hhdronajrkxnetwqppkg.supabase.co/functions/v1/phonePP",P="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhoZHJvbmFqcmt4bmV0d3FwcGtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQzNTY3MjIsImV4cCI6MjA3OTkzMjcyMn0.sIDB1ufidIyBxbzPXElYdmQr9uoy_igfVLaqxAHx5WU",h=async(e,o)=>{const t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`},body:JSON.stringify(o)});if(!t.ok){const a=await t.text();try{const s=JSON.parse(a||"{}"),n=s?.error||s?.message||a||`Request failed with ${t.status}`,r=new Error(n);throw r.details=s,r.status=t.status,r}catch{const n=new Error(a||`Request failed with ${t.status}`);throw n.status=t.status,n}}return t.json()},p=async({amount:e,currency:o="INR",courseId:t,courseSlug:a,userEmail:s,userName:n})=>{console.log("[PhonePe] Creating payment with params:",{amount:e,currency:o,courseId:t,courseSlug:a,userEmail:s,userName:n});const r={action:"create",amount:e,currency:o,courseId:t,courseSlug:a,userEmail:s,userName:n};console.log("[PhonePe] Sending payload:",r);try{const c=await h(i,r);return console.log("[PhonePe] Response received:",c),c}catch(c){throw console.error("[PhonePe] Payment creation failed:",c),c}},l=async e=>{console.log("[PhonePe] Fetching status for transaction:",e);const o={action:"status",orderId:e,transactionId:e};console.log("[PhonePe] Status payload:",o);try{const t=await h(i,o);return console.log("[PhonePe] Status response:",t),t}catch(t){throw console.error("[PhonePe] Status check failed:",t),t}};export{p as c,l as f};
